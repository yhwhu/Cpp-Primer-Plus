# 第7章 函数——C++的编程模块

- C++的返回类型不能是数组，但是可以是组成部分为数组的结构。
- 原型的作用：
  1. 编译器检测输入参数是否规范。
  2. 编译器根据返回类型去内存中寻找相应大小的返回值。
- 避免使用原型的方法：在首次使用函数之前定义它，这样会造成main函数在后面的位置。
- 函数按值传递变量时，会创建一个副本，而不是原来的数据。
- 只有在函数头中，int *arr 和 int arr[ ] 的含义相同，都表示 arr 是一个 int 指针，说明在传递数组时，函数使用的仍然是原来的数组。这符合C++按值传递的定义，只是在这里，把地址传递给了新变量。
- const int *pt 表示 pt 指向常量对象，不能用 pt 来修改这个值， int * const pt 表示 pt 是常量，即只能指向一个值。 
- const 指针用法：
  1. 非 const 变量的地址赋值给指向 const 的指针。（不能通过指针修改变量值）
  2.  const 变量的地址赋值给指向 const 的指针。（不能通过指针修改变量值，也不能通过变量修改变量值）
  3. 非 const 变量的地址赋值给指向非 const 的指针。（能通过指针修改变量值，也能通过变量修改变量值）
  4. **禁止！** const 变量的地址赋值给指向非 const 的指针。（会产生指针可以修改变量值，但是变量是常量的矛盾）
  5. 如果条件允许，尽量使用指向 const 的指针，避免无意中修改数据，同时可以接受 const 变量。
- 结构作为函数变量时是按值传递，会复制整个结构，降低运行速度，可以使用 & 传递地址。 



### 函数指针

- 函数也有地址，就是存储机器语言代码的内存的开始地址，可以传递给不同的函数。
- 函数名就是函数的地址。
- pam 函数原型：double pam(int)；函数指针（指向pam）：double (\*pt)(int) = pam，pt 是函数指针，\*pt 是函数，pt(3)、(\*pt)(3) 都可以调用 pam(3)。
- 函数指针数组： const double\* (\*pt[3])(const double\*, int) = {func1, func2, fun3}，pt[3] 表示 pt 是一个数组， \*pt[3]，表示 pt 是一个包含3个指针的数组，const double\* 表示返回类型是一个指针，返回类型和特征标（参数列表）表示 pt 是一个包含3个函数指针的数组。调用方法：pt[0]\(2), (*pt[0])(2) 都表示 func1(2).
- 指向整个数组的指针：const double\*(\* (\*pd)[3]))(const double\*, int) = &pt, 多了一个 * 表示 pd 是一个指针。
- 对于数组 pa 而言，pa 表示数组第一个元素的地址，即 &pa[0]，&pa 是整个数组的地址，二者的值相同，类型不同，pa+1 是数组中下一个元素的地址，&pa+1 是跨越整个数组长度后的地址。
- auto 自动类型推断只能用于单值初始化，不能用于初始化列表。