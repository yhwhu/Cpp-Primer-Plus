# 第10章 对象和类



## 10.1 面向对象编程

- 特性：抽象，封装和数据隐藏，多态，继承，代码的可重用性。



## 10.2 抽象和类

```c++
class Stock{
private:
  ...
public:
  ...
}
```



- C++ 通常将接口（类定义）放在头文件， 并将（类方法的实现）放在源代码文件中。
- 防止程序直接访问数据被称为数据隐藏。
- 定义在类声明中的函数将自动成为内联函数，类声明通常将短小的成员函数作为内联函数。
- 同一个类的所有对象共享同一组类方法，即每种方法只有一个副本，不同的对象调用同一个方法时，执行相同的代码块，只是将这些代码用于不同的数据。



## 10.3 类的构造函数和析构函数

- 声明和定义构造函数：

- ```c++
  // constructor prototype with some default arguments, no return, and no void.
  Stock(const string & co, long n = 0, double pr = 0.0);
  
  // constructor definition, no return, and no void.
  Stock::Stock(const string & co, long n, double pr){
    co_ = co;
  }
  ```

  - 参数名不能与类成员相同，通常在成员名中使用后缀 _ ;

- 使用构造函数：

  - ```c++
    Stock food = Stock("world", 25, 2.1);
    Stock food("world", 25, 2.1);
    
    // new, 没有名称，使用指针管理该对象。
    Stock *p = new Stock("world", 25, 2.1);
    ```

- 没有定义任何构造函数时，编译器才会提供默认构造函数。

- 用构造函数创建对象后，程序负责跟踪该对象，直到其过期为止。对象过期时，程序将自动调用一个特殊的成员函数——析构函数，来完成清理工作。

- 如果没有提供析构函数，编译器将隐式地声明一个默认析构函数：

  ```c++
  Stock::~Stock(){}
  ```

- 保证函数不会修改调用对象：

- ```c++
  void show() const;
  void Stock::show() const;
  ```



## 10.4 this指针

- This 指针指向用来调用成员函数的对象（this 被作为隐藏参数传递给方法），指针通过 -> 运算符访问类成员。



## 10.5 对象数组

```c++
Stock mystuff[4]
```

- 要创建类对象数，则这个类必须有默认构造函数。



## 10.6 类作用域

- 三种作用域：全局（文件）作用域，局部（代码块）作用域，类作用域。
- 类作用域：在类中定义的名称（数据成员名和类成员函数名）的作用域都为整个类，在类中是已知的，在类外是不可知的。